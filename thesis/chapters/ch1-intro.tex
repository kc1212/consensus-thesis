\chapter{Introduction}
\label{ch:intro}

We live in a world where technologies have become vital for our welfare and success.
The internet, for instance, gave us the ability of efficiently exchange information on a global scale.
However, in contrast to its original design, the internet and in particular the world wide web is becoming increasingly centralised.
The domain name system, certificate authorities, to name a few, carry enormous responsibilities and are a central point of failure.
The  same can be said for many other services such are online marketplaces,
cloud services, hospitality services and even our banking system.
The 2008 financial crisis is an example of the banking system making poor choices which result in a
decline in consumer wealth in the order of trillions~\cite{financialcrisis} and led to the European debt crisis.

Ironically, also in 2008, Satoshi Nakamoto published the Bitcoin whitepaper~\cite{bitcoin}.
Which, for the first time, gave us a simple banking system in the form of an distributed ledger.
It needs no central control but still incorruptable even if there are malicious parties that aim to undermine the system.
We call such a ledger a blockchain.

The primary innovations are (1) its consensus model, which prevents double spending,
and (2) its incentive mechanism that encourages anyone (with adaquate hardware) to participate in the network and keep it running.
The double spending problem can be seen as an inconsistency issue.
For example, $C$ has 5 units of currency in her account.
At some instant in time, $A$ sees that $C$ transferred 5 units to $A$ and $B$ sees that $C$ transferred 5 units to $B$.
Hence, the transaction is inconsistent with respect to the observer.
Bitcoin and many other blockchain systems solve the inconsistency problem with a consensus algorithm.
The goal of the algorithm is reach agreement on a set of values, e.g. transactions, which eliminates inconsistencies.
In Bitcoin's case, the consensus algorithm is called \emph{proof-of-work}.
Where miners (parties that runs the Bitcoin network) collect transactions and compete in solving (using brute force) a puzzle.
The first miner to solve it generates a block containing all the collected transactions.
The miner is also rewarded with new coins and transaction fees.
It is important to note that every block, that is the solution of the puzzle,
depends on the previous block.
Hence the name blockchain.
Further, honest miners always work on the largest chain.
Due to the difficulty of the puzzle,
it is unlikely for more than one blockchain to exist in the network for a long period of time.
Thus every party sees a consistent blockchain which solves the double spending problem.
Further, due to the reward mechanism,
people are incentivised to act as miners and keep the system running.

Bitcoin has had its ups and downs, but over it has grown into an enormous system.
Its power consumption is as high as Republic of Ireland~\cite{o2014bitcoin}.
Its market cap, at the time of writing, is over 40 Trillion USD~\cite{bitcoinmarketcap}.
Many online marketplaces are using Bitcoin, for example Steam\footnote{\url{https://store.steampowered.com/}} and even Amazon\footnote{Not directly, but via \url{https://purse.io/}.}.
Due to its success, people from many different disciplines began investigating in way to use blockchain technology.
This includes finance~\cite{todo}, heath care~\cite{todo}, logistics~\cite{todo}, energy~\cite{todo} and so on.

Sadly, as traditional blockchain systems began to gain popularity,
their limitations also became apparent.
Bitcoin has the infamous 7 transactions per second upper bound.
This is due to the fact that blocks are fixed to 1 MB are only generated on average every 10 minutes.
Since every Bitcoin transaction is at least 250 bytes, it computes to about 7 transactions per second.
Due to this limitation, it is not uncommon to see a long backlog of about 20000 transactions on \url{https://blockchain.info}\footnote{\url{https://blockchain.info/unconfirmed-transactions/}}.
A few months ago the backlog even reached 100000, which meant new transactions would take at least 11 hours to hit the blockchain~\cite{bitcoinbacklog}.
The issue has plagued the Bitcoin community for some time and is the root cause for the block size debate, which some calls it a civil war~\cite{bitcoincivilwar}.
Parties that are for the increase in block size argue that a larger block would improve the transaction rate.
Parties against it argue that it would make mining more centralised because blocks take longer to propogate through the network and it does not solve the fundamental problem.
A recent empirical study Croman et el.~\cite{croman2016scaling} has shown that simply increasing the block size may help.
But given the bandwidth and latency constraints, it not possible to have more than 758 transactions per second and it may give some miner an unfair lead over others.
Thus fundamental changes are necessary run at the scale of centralised payment processors such as Visa~\cite{visa}, which is in the order of tens of thousands transactions per second.

In this work, we take the advice of Croman et el.~\cite{croman2016scaling} and Marko~\cite{vukolic2015quest} and rethink the blockchain architecture.
Our primary insight came from observing the differences between how transactional systems work in the real world and how they work in blockchain systems like Bitcoin. 
Take a restaurant owner for example, most of the time the customer is honest and pays the bill.
There is no need for the customer or the restaurant owner to report the transaction to any central authority 
because both parties are happy with the transaction.
On the other hand, if the customer leaves without paying the bill,
then the restaurant owner would report the incident to some central authority, e.g. the police.
On the contrary, in blockchain systems, every transaction is effectively sent to the miners,
which can be seen as a collective authority.
This consequently lead to limited scalability because every transaction must be validated by the authority even when most of the transaction are legitimate.

We describe and analyse the aforementioned idea in the remainder of this work.
We begin with the problem description in~\Cref{ch:problem}.
This is followed by a detailed formulation of the model in~\Cref{ch:model}. 
Next, we analyse the correctness and performance of our design in~\Cref{ch:analysis}, this is where we present our key theorems.
Implementation and experimental results are discussed in~\Cref{ch:implementation}.
Finally, we compare our system with other state-of-the-art blockchain systems and conclude in Chapters \ref{ch:related} and \ref{ch:conclusion} respectively.

% However, not everyone is convinced on the practicality of blockchain systems.
% Bram Cohen, the inventor of BitTorrent said
% ``It's getting a lot more media attention than the actual impact it's having so far.''~\cite{cohen}
% Forbes listed a few reasons on why we should be skeptical about blockchains~\cite{forbes},
% some of them include its accessibility for the layperson and its scalability issues.



